<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>spiraljs: demo-local-data</title>

        <link rel="stylesheet" type="text/css" href="spiral.css">

        <script type="text/javascript" src="d3.min.js"></script>
        <script type="text/javascript" src="spiral.min.js"></script>

        <!-- load local data -->
        <script type="text/javascript" src="data.js"></script>
    </head>

    <body>
        <div id="spiral-test"></div>

        <script type="text/javascript">
            var bubblespiral = new spiral.BubbleSpiral(d3.select('#spiral-test'));

            bubblespiral.period_fraction = 0.5;

            var xscale = d3.time.scale();
            xscale.domain(d3.extent(data, (record) => { return new Date(record.datestr); }));
            xscale.range([0., 1.]);

            var weight_scale = d3.scale.linear();
            weight_scale.domain(d3.extent(data, (record) => { return record.latitude; }));
            weight_scale.domain([41.9, 42.]);
            weight_scale.range([1., 10.]);

            bubblespiral.radial_map = (record) => { return xscale(new Date(record.datestr)); };
            bubblespiral.weight_map = (record) => { return weight_scale(record.latitude); };

            bubblespiral.render(data);
        </script>
    </body>
</html>

